"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[19374],{485756:(e,t,n)=>{n.d(t,{xR:()=>g,ZP:()=>y,vR:()=>f});var r=n(658583),a=n(622541),i=n(373314),o=n(217058),s=n(353453),c=n(953565);let u={".pinterdev.com":"pinterdev","playhouse-worker-www":"playhouse-worker-www","playhouse-worker-sterling":"playhouse-worker-sterling","playhouse-worker-analytics":"playhouse-worker-analytics"},l=["accounts-oauth.pinterest.com","analytics-latest.pinterest.com","analytics.pinterest.com","canary.pinterest.com","latest.pinterest.com","sss.www.pinterest.com","testing.pinterest.com","testing-k8s.pinterest.com","unknown","www.pinterest.com","www.pinterest.co.kr","www.pinterest.co.uk","www.pinterest.com.au","www.pinterest.com.mx"],d=/www\.pinterest\.[A-Za-z]{2}/,p=/[A-Za-z]{2}\.pinterest\.com/,m=()=>{let e=navigator&&navigator.userAgent.toLowerCase();if(e){if(e.indexOf("googlebot")>-1||e.indexOf("google web preview")>-1||e.indexOf("google page speed insights")>-1)return"google_bot";if(e.indexOf("msnbot")>-1||e.indexOf("bingbot")>-1)return"ms_bot";if(e.indexOf("applebot")>-1)return"apple_bot";if(e.indexOf("yahoo")>-1||e.indexOf("slurp")>-1)return"yahoo_bot";else if(e.indexOf("yandex")>-1)return"yandex"}},f=e=>{let{userAgent:t}=e;if(!t.isMobile&&!t.isTablet)return"desktop";switch(t.platform){case s.RL:return"iphone";case s.GW:return t.isTablet?"android_tablet":"android";case s.s4:return"ipad";default:return"mobile_other"}};function g(e){let t=l.indexOf(e)>-1||d.test(e)||p.test(e);if(t)return e;for(let t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&e.indexOf(t)>-1)return u[t];return"other"}let h=({moduleName:e,pageType:t,requestContext:n})=>{let s;let u=f(n),l=n.isAuthenticated?"auth":"unauth",d=m(),p=(0,i.Z)(),h=(s=!1,r.U2(a.VL)||(r.t8(a.VL,"1",(0,r.kZ)(a.VL)),s=!0),s),y=document.domain||"unknown";h&&((0,o.My)(`traffic.${u}.${p}.${e}.${l}`),(0,o.My)(`traffic_subdomain.${y}.${p}.${e}.${l}`),(0,o.My)(`traffic_subdomain.${y}.${u}.${p}.${e}.${l}`),(0,o.My)(`traffic_subdomain.${y}.${u}.${l}`),(0,o.My)(`traffic_duplo.${u}.${p}.${e}.${l}`),d&&(0,o.My)(`traffic_bot.${d}.${e}`));let v={domain:g(y),referrer:p??"unknown",platform:u??"unknown",browser:n.userAgent.browserName??"unknown",bot_type:d??"none",page_type:t??"unknown",is_auth:l??"unknown",module:e??"unknown",moduleType:function(e){if(/.*Board(React)?Page(Wrapper)?$/.test(e))return"Board";if(/Closeup|.*Pin(Landing|React)?Page$/.test(e))return"Pin";if("HomePage"===e||"UnauthHomeReactPage"===e||"LoginPage"===e||"Signup"===e)return"Home";if(/.*ProfilePage(Container)?$/.test(e))return"Profile";if("TopicPage"===e||"UnauthTopicPage"===e)return"Topic";if(/.*TodayTab(Feed)?Page$/.test(e))return"TodayTab";if("UnauthTodayArticleFeedPage"===e||"TodayArticleFeedPage"===e)return"TodayArticle";else if(/.*Idea(s)?RootPage$/.test(e))return"IdeasRoot";else if(/.*Idea(s)?(Topic)?Page$/.test(e))return"Ideas";else if(/.*Video(s)?RootPage$/.test(e))return"VideosRoot";else if(/.*Video(s)?(Category)?Page$/.test(e))return"VideosCategory";else if(/.*ShoppingRootPage$/.test(e))return"ShoppingRoot";else if(/.*Shopping(Category)?Page$/.test(e))return"ShoppingCategory";else return"other"}(e??"unknown"),first_visit:h??"unknown"};(0,c.nP)("webapp.traffic",{sampleRate:.1,tags:v}),("google"===p||"other"===p)&&(0,c.nP)(`webapp.traffic.${u}.${p}`,{sampleRate:.1,tags:v})};function y({pageType:e,requestContext:t,route:n}){h({moduleName:{"/":"HomePage","/login":"LoginPage","/pin/:id":"Closeup","/:username":"ProfilePage","/:username/:slug":"BoardPage","/topics/:interest":"TopicPage","/today":"TodayTabPage","/today/:term/:title/:articleId":"TodayArticleFeedPage","/ideas":"IdeasRootPage","/ideas/:interest/:id":"IdeasPage","/videos":"VideosRootPage","/videos/:category/:id":"VideosCategoryPage","/shopping":"ShoppingRootPage","/shopping/:category/:id":"ShoppingCategoryPage"}[n]||"other",pageType:e,requestContext:t})}},705895:(e,t,n)=>{function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>o});let a=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},i=e=>{if(e.isHidden){let{reason:t}=e;a.windowInFocus=!1,a.onPauseListeners.forEach(e=>e(t))}else a.windowInFocus=!0,a.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>i({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>i({isHidden:!1})),window.addEventListener("blur",()=>i({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>i({isHidden:!1})),window.addEventListener("pagehide",()=>i({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>i(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>i(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let o=a},603642:(e,t,n)=>{n.d(t,{Z:()=>ee});var r=n(667294),a=n(705895),i=n(685679),o=n(608029),s=n(297329),c=n(107860),u=n(297315),l=n(906623),d=n(521525),p=n(819281),m=n(793250),f=n(309300);let g=({constraintMap:e,initialNavTiming:t,annotations:n})=>({...n,...(0,f.jh)("constraint_",e),...(0,f.jh)("mark_",(0,c.gQ)()),...(0,f.jh)("browser_",{...t?(0,f.D3)(t):{},...(0,f.rX)()})});var h=n(840387);let y=(e,t)=>[...e.map(e=>(0,h.Z)(e,t)).filter(Boolean)];var v=n(302234),T=n(663678),w=n(953565);let E=e=>e<=2500?"Good":e>2500&&e<=4e3?"Needs Improvement":"Poor",S=({eventPrefix:e,endTime:t,tags:n,resourceArr:r,resourceType:a="allResources"})=>{let i=r.length;if(i>0&&"object"==typeof r[0]&&!Array.isArray(r[0])){let o=[...r].sort((e,t)=>e.fetchStart-t.fetchStart),s=[...r].sort((e,t)=>e.responseEnd-t.responseEnd),c=1,u=t/5,l=0;for(;c<=5;){let t=0;for(;l<=i-1&&o[l].fetchStart<=u*c;)l+=1,t+=1;(0,w.S0)(`${e}.tags.${a}.fetchStartInterval${c}of5`,t,{sampleRate:.2,tags:n}),(0,w.S0)(`${e}.${a}.fetchStartInterval${c}of5`,t,{sampleRate:.2}),c+=1}let d={zeroPercentInFlight:o[0].fetchStart,twentyFivePercentInFlight:o[Math.floor(i/4)].fetchStart,fiftyPercentInFlight:o[2*Math.floor(i/4)].fetchStart,seventyFivePercentInFlight:o[3*Math.floor(i/4)].fetchStart,hundredPercentInFlight:o[i-1].fetchStart,twentyFivePercentComplete:s[Math.floor(i/4)].responseEnd,fiftyPercentComplete:s[2*Math.floor(i/4)].responseEnd,seventyFivePercentComplete:s[3*Math.floor(i/4)].responseEnd,hundredPercentComplete:s[i-1].responseEnd};for(let t in d)d[t]&&((0,w.LY)(`${e}.tags.${a}.${t}`,d[t],{sampleRate:.2,tags:n}),(0,w.LY)(`${e}.${a}.${t}`,d[t],{sampleRate:.2}))}},_=({annotateExperiments:e,endTime:t,entries:n,metricId:r,pwtStaticContext:a})=>{let i=`${(0,T.Z)(a)}.${r.surface}`,o=[i];e&&e.forEach(e=>{let t=a.getExperimentGroup(e)||"null";o.push(`${i}.${e}.${t}`)});let s=E((0,v.Bn)()),c={lcpTimingBucket:s||"unknown",isAuthenticated:a.isAuthenticated,navigationType:r.navigationType},u=Array.from(n.filter(e=>"number"==typeof e.encodedBodySize&&e.encodedBodySize>=1e4&&e.responseEnd<=t)),l=[],d=[],p=[],m=[],f=[];u.forEach(e=>{"img"===e.initiatorType?l.push(e):"css"===e.initiatorType?d.push(e):"script"===e.initiatorType?p.push(e):"xmlhttprequest"===e.initiatorType?m.push(e):"link"===e.initiatorType&&e.name.includes("i.pinimg.com")&&f.push(e)}),o.forEach(e=>{S({eventPrefix:e,endTime:t,tags:c,resourceArr:u}),S({eventPrefix:e,endTime:t,tags:c,resourceArr:l,resourceType:"image"}),S({eventPrefix:e,endTime:t,tags:c,resourceArr:d,resourceType:"css"}),S({eventPrefix:e,endTime:t,tags:c,resourceArr:p,resourceType:"scripts"}),S({eventPrefix:e,endTime:t,tags:c,resourceArr:m,resourceType:"xhr"}),S({eventPrefix:e,endTime:t,tags:c,resourceArr:f,resourceType:"preloadedImage"})})};var b=n(279600);let A=({startTime:e,responseEnd:t},n)=>e>n.endTime||!!t&&t<n.startTime,I=({annotateExperiments:e,annotations:t,binaryAnnotations:n,constraintMap:r,endTime:a,imageTimings:i,metricId:o,pwtStaticContext:s,startTime:c,traceId:u,spans:l})=>{let f;let h=(0,b.Cg)();"initial_app_load"===o.navigationType&&(f=(0,p.Z)());let v=i.map(({name:e})=>e),T=h.map(e=>(0,m.p)(e,v)).filter(({timing:e})=>!A(e,{startTime:c,endTime:a}));return("board"===o.surface||"pin_closeup"===o.surface)&&_({annotateExperiments:e,endTime:a,entries:h,metricId:o,pwtStaticContext:s}),{type:"COMPLETE",traceId:u,startTime:c,endTime:a,spans:y(T,u).concat(l),annotationMap:g({constraintMap:r,initialNavTiming:f,annotations:t}),binaryAnnotationMap:(0,d.rA)({annotateExperiments:e,binaryAnnotations:n,entries:h,metricId:o,performanceResources:T,pwtEndTime:a,pwtStaticContext:s})}};var P=n(404373);let M=!1,L=(e,t)=>{if(e&&t){if(!M)return M=!0,t;(0,s.H)("duplicated_initial_app_load_surface_pwt")}return(0,P.Z)()};var C=n(363404),R=n(367180);let O=e=>{let t=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{}),n=Array.from(document.getElementsByTagName("img")).map(e=>{let n=e.src.replace(".jpg","").split("/"),r=n[n.length-1];if(t[r]){let n=R.rZ(e)?.width||1,a=t[r].downloadSize;return{fileName:r,renderedSize:n,downloadedSize:a,ratio:a/n}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),r=Array.from(document.querySelectorAll('div[role="img"]')).map(e=>{let n=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=n[n.length-1];if(t[r]&&e instanceof HTMLDivElement){let n=R.rZ(e)?.width||1,a=t[r].downloadSize;return{fileName:r,renderedSize:n,downloadedSize:a,ratio:a/n}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}});[...n,...r].forEach(t=>{let{ratio:n,fileName:r,downloadedSize:a}=t;t.ratio>1.05&&(0,s.A9)(`checkImageRatio.${e}`,{count:Math.round(10*n)/10,tags:{fileName:`${a}_${r}`}})})};var N=n(970126),$=n(5859);let k=(e,t)=>{let n=(0,r.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}};var D=n(184960),B=n(785893);let x=["initial_app_load","client_route_push"],H=(0,o.XV)("PwtSurface"),Z="NavigationComplete",F="VisuallyComplete",U=(e,t)=>{e.isSampled&&(0,C.Z)({metricId:e.metricConfig.metricId,pwtStaticContext:e.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:t}})},V=(e,t,n)=>{let{metricConfig:{metricId:r,pwtStaticContext:a,annotateExperiments:o},annotations:u,binaryAnnotations:l,constraintMap:d,startTime:p,imageTimings:m,isSampled:f,spans:g}=e;(0,c.L8)(`PWT_Complete_${(0,i.KJ)(r)}`);let h=L("initial_app_load"===r.navigationType,a.serverData?.trace_id),y=I({annotateExperiments:o,annotations:u,binaryAnnotations:l,constraintMap:d,endTime:t,imageTimings:m,metricId:r,pwtStaticContext:a,startTime:p,traceId:h,spans:g});f&&!n&&(0,C.Z)({metricId:r,pwtStaticContext:a,result:y});try{O(String(y.binaryAnnotationMap["metricId.surface"].value))}catch(e){(0,s.H)("image_ratio_check_error",{error:e})}return{...e,result:y,status:"DONE"}},z=(e,t)=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t]));return V(e,n,t)}return H(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},j=(e,t)=>{let{constraint:n,time:r,disablePWTLogging:a}=t,o=(0,i.KJ)(e.metricConfig.metricId);return N.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(H(`constraint "${n}" is already complete.`),(0,s.H)("duplicated_constraint_complete",{constraint:n,action:o}),e):(H(`marking constraint "${n}" as complete`),(0,c.ZP)(`constraint_${n}_is_complete`),z({...e,constraintMap:{...e.constraintMap,[n]:r||N.Z.now()}},a)):(H(`marked constraint "${n}" is not a required constraint.`),e):((0,s.H)("missing_window_performance",{action:o}),e)},G=(e,t)=>{if(!N.Z){let t=(0,i.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}H(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:r,...a}=e.constraintMap;return z({...e,constraintMap:a,metricConfig:{...e.metricConfig,constraints:n}})},W=(e,t)=>{if(!N.Z){let t=(0,i.KJ)(e.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:t})}H(`updating pwt segment to "${t}"`);let n={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:n}}},K=(e,t)=>{let{metricConfig:n,startTime:r,isSampled:a,disablePWTLogging:o}=t;if(o||"TIMING"!==e.status||r===e.startTime||U(e,"routeUpdatedOnSameSurface"),!n)return{status:"DISABLED",metricConfig:null};let c=(0,i.KJ)(n.metricId);return"TIMING"===e.status&&e.startTime===r&&e.constraintMap[Z]?((0,s.H)("duplicated_init_route_action",{action:c}),e):(o||("Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,s.A9)(`TIMING.${c}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,s.A9)(`TIMING.sampled.${c}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.5})):((0,s.A9)(`TIMING.${c}`),(0,s.A9)(`TIMING.sampled.${c}`,{sampleRate:.5}))),j({status:"TIMING",metricConfig:n,startTime:r,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:a,spans:[]},{constraint:Z,disablePWTLogging:o}))},J=(e,t)=>{if(H("dispatch action",t),"INIT_ROUTE"===t.type)return K(e,t.payload);if("TIMING"!==e.status)return H(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":U(e,t.reason);let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:r}=t.payload;if(!N.Z)return e;let a=N.Z.now();return H(`adding annotation {${r}: ${a}}`),{...e,annotations:{...e.annotations,[r]:a}};case"BINARY_ANNOTATE":let{name:o,value:c,annotationType:u}=t.payload;return H(`adding binary annotation {${o}: ${c}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[o]:{value:c,type:u}}};case"MARK_CONSTRAINT_COMPLETE":return j(e,t.payload);case"REMOVE_CONSTRAINT":return G(e,t.payload);case"SET_SEGMENT":return W(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return U(e,"visuallyComplete_noImages"),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let r=Math.max(...n.map(e=>e.responseEnd||0));return j({...e,imageTimings:n},{constraint:F,time:r})}case"ADD_SUBSPAN":let{startTime:l}=e,{payload:{name:d,startTime:p,endTime:m,annotations:f,binaryAnnotations:g,parentId:h}}=t;return{...e,spans:[...e.spans,{name:d,id:(0,P.Z)(),startTime:p||l,endTime:m,annotationMap:{...f},binaryAnnotationMap:{...g},parentId:h}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,P.Z)(),startTime:N.Z?N.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let y=e.spans.findIndex(e=>e.name===t.payload.name);return y>-1?(e.spans[y].endTime=N.Z?N.Z.now():0,t.payload.annotations&&(e.spans[y].annotationMap={...e.spans[y].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[y].binaryAnnotationMap={...e.spans[y].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,s.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let v=(0,i.KJ)(e.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:v}),e}},Y=e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},q=new Set,X=({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:i,annotateExperiments:o,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:c,navigationType:l},sampleRate:d})=>{let p=(0,r.useRef)("NOT_SET"),m=(0,u.N5)(),{getState:f,dispatch:g}=k(J,{status:"DISABLED",metricConfig:null}),h=(0,$.B)();if(p.current!==c&&(p.current=c,m)){let{isAuthenticated:r}=m,a=e&&l&&(s||x).includes(l)?{metricId:{type:"surface",surface:e,navigationType:l,isAuthenticated:r,segment:n},annotateExperiments:o,constraints:[Z,...t||[],...i?[F]:[]],pwtStaticContext:m}:null;(0,w.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:l,isAuthenticated:r}});let u=!q.has(c);g({type:"INIT_ROUTE",payload:{metricConfig:a,startTime:c?c.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!u}}),u&&q.add(c)}let y=f();if((0,r.useEffect)(()=>()=>{q.delete(c)},[c]),(0,r.useEffect)(()=>{let e=e=>{g({type:"ABORT",reason:e})};a.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,r=()=>{let e=Math.abs(window.innerHeight-t),a=Math.abs(window.innerWidth-n),i=window.innerHeight!==t,o=window.innerWidth!==n,s={handler:(0,D.H)(),deviceType:m?.deviceType??"unknown",isAuthenticated:m?.isAuthenticated??"unknown",platform:h.userAgent.platform??"unknown"};(0,w.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:i,widthChanged:o}}),i&&(0,w.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,w.S0)("webapp.PwtLogger.resizeWidthDelta",a,{sampleRate:1,tags:s}),window.removeEventListener("resize",r);let c=m?.deviceType==="phone"&&(!o&&i&&e<=150||!i&&!o)||m?.deviceType==="desktop"&&!i&&!o;if(c){(0,w.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:i,widthChanged:o}});return}g({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),()=>{let t=f();H("handling unmount",t),"TIMING"===t.status&&U(t,"unmount"),a.Z.removePauseListener(e),window.removeEventListener("resize",r)}},[]),"TIMING"!==y.status||!y.constraintMap[Z])return{state:y,context:null};let{startTime:v,metricConfig:T}=y;return{state:y,context:{abort:e=>g({type:"ABORT",reason:e}),addAnnotation:e=>g({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>g({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,r={},a={},i=null)=>g({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:r,binaryAnnotations:a,parentId:i}}),getId:()=>v,getMetricId:()=>T.metricId,markConstraintComplete:e=>g({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:N.Z?N.Z.now():0}}),removeConstraint:e=>g({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>g({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:T.constraints.includes(F)?e=>g({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},r=null)=>g({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:r}}),stopSubspan:(e,t={},n={},r=null)=>g({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:r}})}}},Q=()=>{let e=(0,l.E)(),t=!!e;(0,r.useEffect)(()=>{if(t){let t=e?.getMetricId(),n=t?(0,i.KJ)(t):null;(0,s.H)("nested_pwt_surface",{action:n})}},[t])};function ee({children:e,...t}){let n=(0,u.fM)(),r=Y(n),a=t.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth"]:[],i=[...t.annotateExperiments??[],...a],o={...t,annotateExperiments:i,navigationInfo:{navigationType:r,clientNavigation:n}},{context:s}=X(o);return Q(),(0,B.jsx)(l.S,{value:s,children:e})}},939129:(e,t,n)=>{n.d(t,{e:()=>r,n:()=>a});let r=e=>{switch(e){case"/pin/:id":case"/pin/:id/sent":return"pin_closeup";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/ideas/:interest/:id":return"topic";default:return null}},a=e=>{let t=[{pattern:"/",name:"homefeed"},{pattern:"/pin/:id",name:"pin_closeup"},{pattern:"/pin/:id/sent",name:"pin_closeup"},{pattern:"/pin/:id/visual-search",name:"flashlight"},{pattern:"/amp/pin/:id",name:"amp"},{pattern:"/today",name:"today"},{pattern:"/search",name:"search_landing_page"},{pattern:"/search/:scope",name:"search_results"},{pattern:"/notifications",name:"notifications"},{pattern:"/settings",name:"settings_landing_page"},{pattern:"/settings/:tab",name:"settings_tab"},{pattern:"/:username/_created",name:"profile_created_tab"},{pattern:"/:username/_saved",name:"profile_saved_tab"},{pattern:"/:username/:slug",name:"board"},{pattern:"/:username",name:"profile"},{pattern:"/ideas/:interest/:id",name:"topic"}].find(t=>{if(!e)return"pathname_invalid";let n=t.pattern.split("/").filter(e=>""!==e),r=e.split("/").filter(e=>""!==e);if(n.length!==r.length)return!1;for(let e=0;e<n.length;e+=1)if(!n[e].startsWith(":")&&r[e]!==n[e])return!1;return!0});return t?t.name:"unknown"}},865611:(e,t,n)=>{n.d(t,{Z:()=>r});let r=e=>e<100?"0-100ms":e<250?"100-250ms":e<500?"250-500ms":e<1e3?"500-1000ms":e<2e3?"1000-2000ms":e<3e3?"2000-3000ms":e<4e3?"3000-4000ms":e<5e3?"4000-5000ms":e<6e3?"5000-6000ms":e<7e3?"6000-7000ms":e<8e3?"7000-8000ms":e<9e3?"8000-9000ms":e<1e4?"9000-10000ms":e<15e3?"10000-15000ms":e<2e4?"15000-20000ms":e<25e3?"20000-25000ms":"25000+ms"},371626:(e,t,n)=>{n.d(t,{Z:()=>r});let r=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";case"AU":return"AU";case"IN":return"IN";default:return"OTHER"}}},396596:(e,t,n)=>{n.d(t,{Z:()=>r});function r(e){let t=e.split("?")[0]??"";if(!t.startsWith("/pin/"))return null;let n=t.split("/")[3];return n?"feedback"===n||"sent"===n?n:null:"default"}},421715:(e,t,n)=>{n.d(t,{V:()=>i,b:()=>a});let r=e=>e?e.tagName||null!==e.parentElement?"HTML"===e.tagName&&null===e.parentElement?"HTML":"BODY"===e.tagName&&e.parentElement?.tagName==="HTML"?"BODY":e.dataset.layoutShiftBoundaryID||e.dataset.testId?e.dataset.layoutShiftBoundaryID||e.dataset.testId:e.parentElement?r(e.parentElement):"NOT_A_NODE":"DOCUMENT":"NODE_REMOVED",a=e=>{let t=e.attribution.processedEventEntries.find(t=>t.startTime===e.attribution.interactionTime),n=t?t.target:null;return n?r(n):"NODE_REMOVED"},i=e=>e?r(e):"NODE_REMOVED"},353453:(e,t,n)=>{n.d(t,{GW:()=>a,RL:()=>r,s4:()=>i});let r="ios",a="android",i="ipad"},45528:(e,t,n)=>{n.d(t,{NO:()=>es,Yn:()=>ea,a4:()=>R,mw:()=>C});var r,a,i,o=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},s=function(e){if("loading"===document.readyState)return"loading";var t=o();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},c=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},u=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,a=r.id?"#"+r.id:c(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+a.length>(t||100)-1)return n||a;if(n=n?a+">"+n:a,r.id)break;e=r.parentNode}}catch(e){}return n},l=-1,d=function(){return l},p=function(e){addEventListener("pageshow",function(t){t.persisted&&(l=t.timeStamp,e(t))},!0)},m=function(){var e=o();return e&&e.activationStart||0},f=function(e,t){var n=o(),r="navigate";return d()>=0?r="back-forward-cache":n&&(document.prerendering||m()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},g=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(e){Promise.resolve().then(function(){t(e.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},h=function(e,t,n,r){var a,i;return function(o){var s;t.value>=0&&(o||r)&&((i=t.value-(a||0))||void 0===a)&&(a=t.value,t.delta=i,t.rating=(s=t.value)>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},y=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},v=function(e){document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e()})},T=function(e){var t=!1;return function(){t||(e(),t=!0)}},w=-1,E=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},S=function(e){"hidden"===document.visibilityState&&w>-1&&(w="visibilitychange"===e.type?e.timeStamp:0,b())},_=function(){addEventListener("visibilitychange",S,!0),addEventListener("prerenderingchange",S,!0)},b=function(){removeEventListener("visibilitychange",S,!0),removeEventListener("prerenderingchange",S,!0)},A=function(){return w<0&&(w=E(),_(),p(function(){setTimeout(function(){w=E(),_()},0)})),{get firstHiddenTime(){return w}}},I=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},P=[1800,3e3],M=function(e,t){t=t||{},I(function(){var n,r=A(),a=f("FCP"),i=g("paint",function(e){e.forEach(function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(a.value=Math.max(e.startTime-m(),0),a.entries.push(e),n(!0)))})});i&&(n=h(e,a,P,t.reportAllChanges),p(function(r){n=h(e,a=f("FCP"),P,t.reportAllChanges),y(function(){a.value=performance.now()-r.timeStamp,n(!0)})}))})},L=[.1,.25],C=function(e,t){var n,r;n=function(t){e(function(e){var t,n={};if(e.entries.length){var r=e.entries.reduce(function(e,t){return e&&e.value>t.value?e:t});if(r&&r.sources&&r.sources.length){var a=(t=r.sources).find(function(e){return e.node&&1===e.node.nodeType})||t[0];a&&(n={largestShiftTarget:u(a.node),largestShiftTime:r.startTime,largestShiftValue:r.value,largestShiftSource:a,largestShiftEntry:r,loadState:s(r.startTime)})}}return Object.assign(e,{attribution:n})}(t))},r=(r=t)||{},M(T(function(){var e,t=f("CLS",0),a=0,i=[],o=function(n){n.forEach(function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];a&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,i.push(e)):(a=e.value,i=[e])}}),a>t.value&&(t.value=a,t.entries=i,e())},s=g("layout-shift",o);s&&(e=h(n,t,L,r.reportAllChanges),v(function(){o(s.takeRecords()),e(!0)}),p(function(){a=0,e=h(n,t=f("CLS",0),L,r.reportAllChanges),y(function(){return e()})}),setTimeout(e,0))}))},R=function(e,t){M(function(t){e(function(e){var t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:s(d())};if(e.entries.length){var n=o(),r=e.entries[e.entries.length-1];if(n){var a=n.activationStart||0,i=Math.max(0,n.responseStart-a);t={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:s(e.entries[0].startTime),navigationEntry:n,fcpEntry:r}}}return Object.assign(e,{attribution:t})}(t))},t)},O=0,N=1/0,$=0,k=function(e){e.forEach(function(e){e.interactionId&&(N=Math.min(N,e.interactionId),O=($=Math.max($,e.interactionId))?($-N)/7+1:0)})},D=function(){"interactionCount"in performance||r||(r=g("event",k,{type:"event",buffered:!0,durationThreshold:0}))},B=[],x=new Map,H=0,Z=[],F=function(e){if(Z.forEach(function(t){return t(e)}),e.interactionId||"first-input"===e.entryType){var t=B[B.length-1],n=x.get(e.interactionId);if(n||B.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};x.set(r.id,r),B.push(r)}B.sort(function(e,t){return t.latency-e.latency}),B.length>10&&B.splice(10).forEach(function(e){return x.delete(e.id)})}}},U=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=T(e),"hidden"===document.visibilityState?e():(n=t(e),v(e)),n},V=[200,500],z=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},I(function(){D();var n,a,i=f("INP"),o=function(e){U(function(){e.forEach(F);var t,n=(t=Math.min(B.length-1,Math.floor(((r?O:performance.interactionCount||0)-H)/50)),B[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,a())})},s=g("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});a=h(e,i,V,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),v(function(){o(s.takeRecords()),a(!0)}),p(function(){H=0,B.length=0,x.clear(),a=h(e,i=f("INP"),V,t.reportAllChanges)}))}))},j=[],G=[],W=new WeakMap,K=new Map,J=-1,Y=function(e){j=j.concat(e),q()},q=function(){J<0&&(J=U(X))},X=function(){K.size>10&&K.forEach(function(e,t){x.has(t)||K.delete(t)});var e=B.map(function(e){return W.get(e.entries[0])}),t=G.length-50;G=G.filter(function(n,r){return r>=t||e.includes(n)});for(var n=new Set,r=0;r<G.length;r++){var a=G[r];er(a.startTime,a.processingEnd).forEach(function(e){n.add(e)})}for(var o=0;o<50;o++){var s=j[j.length-1-o];if(!s||s.startTime<i)break;n.add(s)}j=Array.from(n),J=-1};Z.push(function(e){e.interactionId&&e.target&&!K.has(e.interactionId)&&K.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;i=Math.max(i,e.processingEnd);for(var r=G.length-1;r>=0;r--){var a=G[r];if(8>=Math.abs(n-a.renderTime)){(t=a).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},G.push(t)),(e.interactionId||"first-input"===e.entryType)&&W.set(e,t),q()});var Q,ee,et,en,er=function(e,t){for(var n,r=[],a=0;n=j[a];a++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},ea=function(e,t){a||(a=g("long-animation-frame",Y)),z(function(t){e(function(e){var t=e.entries[0],n=W.get(t);if(!n){var r={reportTime:performance.now(),navigationType:e.navigationType,entries:e.entries.map(function(e){return Object.assign({interactionId:e.interactionId},e.toJSON())}),value:e.value,delta:e.delta};throw Error("Missing group: ".concat(JSON.stringify(r)))}var a=t.processingStart,i=n.processingEnd,o=n.entries.sort(function(e,t){return e.processingStart-t.processingStart}),c=er(t.startTime,i),l=e.entries.find(function(e){return e.target}),d=l&&l.target||K.get(t.interactionId),p=[t.startTime+t.duration,i].concat(c.map(function(e){return e.startTime+e.duration})),m=Math.max.apply(Math,p);return Object.assign(e,{attribution:{interactionTarget:u(d),interactionTargetElement:d,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:m,processedEventEntries:o,longAnimationFrameEntries:c,inputDelay:a-t.startTime,processingDuration:i-a,presentationDelay:Math.max(m-i,0),loadState:s(t.startTime)}})}(t))},t)},ei=[2500,4e3],eo={},es=function(e,t){var n,r;n=function(t){e(function(e){var t={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:e.value};if(e.entries.length){var n=o();if(n){var r=n.activationStart||0,a=e.entries[e.entries.length-1],i=a.url&&performance.getEntriesByType("resource").filter(function(e){return e.name===a.url})[0],s=Math.max(0,n.responseStart-r),c=Math.max(s,i?(i.requestStart||i.startTime)-r:0),l=Math.max(c,i?i.responseEnd-r:0),d=Math.max(l,a.startTime-r);t={element:u(a.element),timeToFirstByte:s,resourceLoadDelay:c-s,resourceLoadDuration:l-c,elementRenderDelay:d-l,navigationEntry:n,lcpEntry:a},a.url&&(t.url=a.url),i&&(t.lcpResourceEntry=i)}}return Object.assign(e,{attribution:t})}(t))},r=(r=t)||{},I(function(){var e,t=A(),a=f("LCP"),i=function(n){r.reportAllChanges||(n=n.slice(-1)),n.forEach(function(n){n.startTime<t.firstHiddenTime&&(a.value=Math.max(n.startTime-m(),0),a.entries=[n],e())})},o=g("largest-contentful-paint",i);if(o){e=h(n,a,ei,r.reportAllChanges);var s=T(function(){eo[a.id]||(i(o.takeRecords()),o.disconnect(),eo[a.id]=!0,e(!0))});["keydown","click"].forEach(function(e){addEventListener(e,function(){return U(s)},!0)}),v(s),p(function(t){e=h(n,a=f("LCP"),ei,r.reportAllChanges),y(function(){a.value=performance.now()-t.timeStamp,eo[a.id]=!0,e(!0)})})}})},ec={passive:!0,capture:!0},eu=new Date,el=function(e,t){Q||(Q=t,ee=e,et=new Date,em(removeEventListener),ed())},ed=function(){if(ee>=0&&ee<et-eu){var e={entryType:"first-input",name:Q.type,target:Q.target,cancelable:Q.cancelable,startTime:Q.timeStamp,processingStart:Q.timeStamp+ee};en.forEach(function(t){t(e)}),en=[]}},ep=function(e){if(e.cancelable){var t,n,r,a=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){el(a,e),r()},n=function(){r()},r=function(){removeEventListener("pointerup",t,ec),removeEventListener("pointercancel",n,ec)},addEventListener("pointerup",t,ec),addEventListener("pointercancel",n,ec)):el(a,e)}},em=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,ep,ec)})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/19374-b29924c655f06fc3.mjs.map